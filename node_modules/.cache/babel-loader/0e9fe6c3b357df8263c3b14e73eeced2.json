{"ast":null,"code":"import _classCallCheck from\"/Users/caseydzuong/Desktop/movierama/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/caseydzuong/Desktop/movierama/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/caseydzuong/Desktop/movierama/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/caseydzuong/Desktop/movierama/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Joi from\"joi-browser\";import Form from\"../common/form\";import NavBar from\"./navBar\";import{getMovie,saveMovie}from\"../services/fakeMovieService\";import{getGenres}from\"../services/fakeGenreService\";var MovieForm=/*#__PURE__*/function(_Form){_inherits(MovieForm,_Form);var _super=_createSuper(MovieForm);function MovieForm(){var _this;_classCallCheck(this,MovieForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:{title:\"\",genreId:\"\",numberInStock:\"\",dailyRentalRate:\"\"},genres:[],errors:{}};_this.schema={_id:Joi.string(),title:Joi.string().required().label(\"Title\"),genreId:Joi.string().required().label(\"Genre\"),numberInStock:Joi.number().required().min(0).max(100).label(\"Number in Stock\"),dailyRentalRate:Joi.number().required().min(0).max(10).label(\"Daily Rental Rate\")};_this.doSubmit=function(){saveMovie(_this.state.data);_this.props.history.push(\"/movies\");};return _this;}_createClass(MovieForm,[{key:\"componentDidMount\",value:function componentDidMount(){var genres=getGenres();this.setState({genres:genres});var movieId=this.props.match.params.id;if(movieId===\"new\")return;var movie=getMovie(movieId);if(!movie)return this.props.history.replace(\"/not-found\");this.setState({data:this.mapToViewModel(movie)});}},{key:\"mapToViewModel\",value:function mapToViewModel(movie){return{_id:movie._id,title:movie.title,genreId:movie.genre._id,numberInStock:movie.numberInStock,dailyRentalRate:movie.dailyRentalRate};}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavBar,null),/*#__PURE__*/React.createElement(\"main\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"title\"},\"add movie\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},this.renderInput(\"title\",\"Title\"),this.renderSelect(\"genreId\",\"Genre\",this.state.genres),this.renderInput(\"numberInStock\",\"Number in Stock\",\"number\"),this.renderInput(\"dailyRentalRate\",\"Rate\"),this.renderButton(\"Save\")))));}}]);return MovieForm;}(Form);export default MovieForm;","map":{"version":3,"sources":["/Users/caseydzuong/Desktop/movierama/movierama/src/components/movieForm.jsx"],"names":["React","Joi","Form","NavBar","getMovie","saveMovie","getGenres","MovieForm","state","data","title","genreId","numberInStock","dailyRentalRate","genres","errors","schema","_id","string","required","label","number","min","max","doSubmit","props","history","push","setState","movieId","match","params","id","movie","replace","mapToViewModel","genre","handleSubmit","renderInput","renderSelect","renderButton"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Joi from \"joi-browser\";\nimport Form from \"../common/form\";\nimport NavBar from \"./navBar\";\nimport { getMovie, saveMovie } from \"../services/fakeMovieService\";\nimport { getGenres } from \"../services/fakeGenreService\";\n\nclass MovieForm extends Form {\n  state = {\n    data: {\n      title: \"\",\n      genreId: \"\",\n      numberInStock: \"\",\n      dailyRentalRate: \"\",\n    },\n    genres: [],\n    errors: {},\n  };\n\n  schema = {\n    _id: Joi.string(),\n    title: Joi.string().required().label(\"Title\"),\n    genreId: Joi.string().required().label(\"Genre\"),\n    numberInStock: Joi.number()\n      .required()\n      .min(0)\n      .max(100)\n      .label(\"Number in Stock\"),\n    dailyRentalRate: Joi.number()\n      .required()\n      .min(0)\n      .max(10)\n      .label(\"Daily Rental Rate\"),\n  };\n\n  componentDidMount() {\n    const genres = getGenres();\n    this.setState({ genres });\n\n    const movieId = this.props.match.params.id;\n    if (movieId === \"new\") return;\n\n    const movie = getMovie(movieId);\n    if (!movie) return this.props.history.replace(\"/not-found\");\n\n    this.setState({ data: this.mapToViewModel(movie) });\n  }\n\n  mapToViewModel(movie) {\n    return {\n      _id: movie._id,\n      title: movie.title,\n      genreId: movie.genre._id,\n      numberInStock: movie.numberInStock,\n      dailyRentalRate: movie.dailyRentalRate,\n    };\n  }\n\n  doSubmit = () => {\n    saveMovie(this.state.data);\n\n    this.props.history.push(\"/movies\");\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <NavBar />\n        <main className=\"container\">\n          <div>\n            <span className=\"title\">add movie</span>\n            <form onSubmit={this.handleSubmit}>\n              {this.renderInput(\"title\", \"Title\")}\n              {this.renderSelect(\"genreId\", \"Genre\", this.state.genres)}\n              {this.renderInput(\"numberInStock\", \"Number in Stock\", \"number\")}\n              {this.renderInput(\"dailyRentalRate\", \"Rate\")}\n              {this.renderButton(\"Save\")}\n            </form>\n          </div>\n        </main>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default MovieForm;\n"]},"metadata":{},"sourceType":"module"}