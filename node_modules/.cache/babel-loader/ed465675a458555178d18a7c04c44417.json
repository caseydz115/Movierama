{"ast":null,"code":"import _objectSpread from\"/Users/caseydzuong/Desktop/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/caseydzuong/Desktop/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/caseydzuong/Desktop/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/caseydzuong/Desktop/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/caseydzuong/Desktop/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/caseydzuong/Desktop/movierama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{getMovies}from\"../services/fakeMovieService\";import MoviesTable from\"./moviesTable\";import ListGroup from\"../common/listgroup\";import Pagination from\"../common/pagination\";import{paginate}from\"../utils/paginate\";import{getGenres}from\"../services/fakeGenreService\";import _ from\"lodash\";var Movies=/*#__PURE__*/function(_Component){_inherits(Movies,_Component);var _super=_createSuper(Movies);function Movies(){var _this;_classCallCheck(this,Movies);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movies:[],genres:[],currentPage:1,pageSize:4,sortColumn:{path:\"title\",order:\"asc\"}};_this.handleDelete=function(movie){var movies=_this.state.movies.filter(function(m){return m._id!==movie._id;});_this.setState({movies:movies});};_this.handleLike=function(movie){var movies=_toConsumableArray(_this.state.movies);var index=movies.indexOf(movie);movies[index]=_objectSpread({},movies[index]);movies[index].liked=!movies[index].liked;_this.setState({movies:movies});};_this.handlePageChange=function(page){_this.setState({currentPage:page});};_this.handleGenreSelect=function(genre){_this.setState({selectedGenre:genre,currentPage:1});};_this.handleSort=function(sortColumn){_this.setState({sortColumn:sortColumn});};return _this;}_createClass(Movies,[{key:\"componentDidMount\",value:function componentDidMount(){var genres=[{_id:\"\",name:\"All genres\"}].concat(_toConsumableArray(getGenres()));this.setState({movies:getMovies(),genres:genres});}},{key:\"render\",value:function render(){var count=this.state.movies.length;var _this$state=this.state,pageSize=_this$state.pageSize,currentPage=_this$state.currentPage,sortColumn=_this$state.sortColumn,selectedGenre=_this$state.selectedGenre,allMovies=_this$state.movies;if({count:count}===0)return/*#__PURE__*/React.createElement(\"p\",null,\"There are no movies in the database.\");var filtered=selectedGenre&&selectedGenre._id?allMovies.filter(function(m){return m.genre._id===selectedGenre._id;}):allMovies;var sorted=_.orderBy(filtered,[sortColumn.path],[sortColumn.order]);var movies=paginate(sorted,currentPage,pageSize);return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(ListGroup,{items:this.state.genres,selectedItem:this.state.selectedGenre,onItemSelect:this.handleGenreSelect})),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",null,\"Showing \",filtered.length,\" movies in the database.\"),/*#__PURE__*/React.createElement(MoviesTable,{movies:movies,sortColumn:sortColumn,onLike:this.handleLike,onDelete:this.handleDelete,onSort:this.handleSort}),/*#__PURE__*/React.createElement(Pagination,{itemsCount:filtered.length,pageSize:pageSize,onPageChange:this.handlePageChange,currentPage:currentPage})));}}]);return Movies;}(Component);export default Movies;","map":{"version":3,"sources":["/Users/caseydzuong/Desktop/movierama/src/components/movies.jsx"],"names":["React","Component","getMovies","MoviesTable","ListGroup","Pagination","paginate","getGenres","_","Movies","state","movies","genres","currentPage","pageSize","sortColumn","path","order","handleDelete","movie","filter","m","_id","setState","handleLike","index","indexOf","liked","handlePageChange","page","handleGenreSelect","genre","selectedGenre","handleSort","name","count","length","allMovies","filtered","sorted","orderBy"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { getMovies } from \"../services/fakeMovieService\";\nimport MoviesTable from \"./moviesTable\";\nimport ListGroup from \"../common/listgroup\";\nimport Pagination from \"../common/pagination\";\nimport { paginate } from \"../utils/paginate\";\nimport { getGenres } from \"../services/fakeGenreService\";\nimport _ from \"lodash\";\n\nclass Movies extends Component {\n  state = {\n    movies: [],\n    genres: [],\n    currentPage: 1,\n    pageSize: 4,\n    sortColumn: { path: \"title\", order: \"asc\" },\n  };\n\n  componentDidMount() {\n    const genres = [{ _id: \"\", name: \"All genres\" }, ...getGenres()];\n    this.setState({ movies: getMovies(), genres });\n  }\n\n  handleDelete = (movie) => {\n    const movies = this.state.movies.filter((m) => m._id !== movie._id);\n    this.setState({ movies });\n  };\n\n  handleLike = (movie) => {\n    const movies = [...this.state.movies];\n    const index = movies.indexOf(movie);\n    movies[index] = { ...movies[index] };\n    movies[index].liked = !movies[index].liked;\n    this.setState({ movies });\n  };\n\n  handlePageChange = (page) => {\n    this.setState({ currentPage: page });\n  };\n\n  handleGenreSelect = (genre) => {\n    this.setState({ selectedGenre: genre, currentPage: 1 });\n  };\n\n  handleSort = (sortColumn) => {\n    this.setState({ sortColumn });\n  };\n\n  render() {\n    const { length: count } = this.state.movies;\n    const {\n      pageSize,\n      currentPage,\n      sortColumn,\n      selectedGenre,\n      movies: allMovies,\n    } = this.state;\n    if ({ count } === 0) return <p>There are no movies in the database.</p>;\n\n    const filtered =\n      selectedGenre && selectedGenre._id\n        ? allMovies.filter((m) => m.genre._id === selectedGenre._id)\n        : allMovies;\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n\n    const movies = paginate(sorted, currentPage, pageSize);\n\n    return (\n      <div className=\"row\">\n        <div className=\"col-3\">\n          <ListGroup\n            items={this.state.genres}\n            selectedItem={this.state.selectedGenre}\n            onItemSelect={this.handleGenreSelect}\n          />\n        </div>\n        <div className=\"col\">\n          <p>Showing {filtered.length} movies in the database.</p>\n          <MoviesTable\n            movies={movies}\n            sortColumn={sortColumn}\n            onLike={this.handleLike}\n            onDelete={this.handleDelete}\n            onSort={this.handleSort}\n          />\n          <Pagination\n            itemsCount={filtered.length}\n            pageSize={pageSize}\n            onPageChange={this.handlePageChange}\n            currentPage={currentPage}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Movies;\n"]},"metadata":{},"sourceType":"module"}